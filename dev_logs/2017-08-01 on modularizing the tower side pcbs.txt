RLCS Modular PCB apologia
Development log from 2017-08-01
Aaron Morrison

I've just sent a PCB order in to china, so I figured I'd practice what I preach and type out a dev note for where I currently am with the actuator switching PCB project. This note is probably a good entry point if you're wondering what these boards are/what they do, so I'll start from the beginning.

The goal of the tower side RLCS box is to rotate valves (pretty much. They also do some other things, but the limiting factor is valves). The majority of valves have 4 wires coming out of them, arranged in 2 pairs (typically red/black and white/blue). In order to open the valve, you short the red wire to positive and the black wire to negative, and to close the valve, you short the white wire to positive and the blue wire to ground (I probably have those colours mixed up. Trust the datasheet, not me).

I hear someone in the back of the class asking why you don't just have red black, and to close the valve, just set black high and red to ground. The reason valves don't do this is so that they can open the circuit when the valve hits a limit switch (put red through the "all the way open" switch, and the white throught the "all the way closed" switch). Wait, I hear someone else asking why they don't just use diodes in series with the limit switches. Yes, you could do that (diagram left as an exercise for the reader), but diodes have a fun tendency to generate heat (they have a voltage drop and a current through them. P=IV kids) and they sometimes fail for no real reason, and that's not an acceptable thing in a heavy industry, which is where these valves get used.

Anyways, so you have 4 wires. In order to drive it, you need a DPDT relay (positive is to either red or white, and negative is to either black or blue). And if you want to _not_ apply power, you need a SPST relay in series with it. There's your backstory, now I'm gonna move on to the problem I'm trying to solve.

I have no idea how many valves we may need. We have 2 now, Hilbert wants 2 more for engine tests, and nick wants 2 more for nitrogen. I don't feel like building a PCB that can drive 6 valves (in addition to ignition and disconnect), because if one component broke (or we wanted a 7th valve (hey, I don't know)) we'd need to swap the whole thing.

Instead I specced out a mini board that can only drive 1 valve. It's just the DPDT relay in series with an SPST relay in series with a fuse (yay safety!), as well as some connections you can wire limit switches to and some current sensors. The plan is you put 6 of these side by side, and if one fails, you swap just it out. If you need another valve, throw another board into the box (fun fact, these same boards can be used to drive ignition (one board can do 2 ignition circuits (hook red up to positive NC and NO, and hook black up to negative NC and NO)) and disconnect (an actuator is effectively the same as a valve, just 2 less wires. Hook red up to positive NC and negative NO, hook black up to the other 2).

So... Yeah. That's why they're little modular boards. More easily replaceable and more extensible. The boards can easily pass through 12 or 24V DC (depending on what your valve needs) and could _probably/maybe_ switch mains voltage (clearance distances are good, but that hasn't been tested. Proceed with caution) (120VAC is what I mean). The reason they're overbuilt to that degree (3mm traces with .6mm clearances on 2oz copper boards) is to provide future proofing in case we want to use a valve that only runs on AC or we want to go WAY overkill on ignition someday.

that's the end of this dev update. This hopefully provided some useful information. The schematic and PCB layout should be in the team drive (Waterloo Rocketry Team>Electrical/DAQ>RLCS>Development Logs>Revision C - modular) so look at those if you want any more information on how it works. That's about it. Aaron out.
